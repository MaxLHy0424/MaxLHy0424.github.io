<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>MaxLHy0424</title><link>https://MaxLHy0424.github.io</link><description>「一定能找到, 通往与这扭曲的终点所截然不同的, 另一种结局的正确选项. 在无心的日常中, 发现少许奇迹的故事. 所在皆是奇迹的起点. 」</description><copyright>MaxLHy0424</copyright><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://MaxLHy0424.github.io/__web__/avatar.png</url><title>avatar</title><link>https://MaxLHy0424.github.io</link></image><lastBuildDate>Sat, 13 Sep 2025 11:15:38 +0000</lastBuildDate><managingEditor>MaxLHy0424</managingEditor><ttl>60</ttl><webMaster>MaxLHy0424</webMaster><item><title>即将推出下一代 SCLTK</title><link>https://MaxLHy0424.github.io/post/19.html</link><description>经过一个半月的开发，SCLTK v6.4.0 即将进入功能冻结阶段，接下来的一个月的开发将以性能优化和兼容性增强为主。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/19.html</guid><pubDate>Fri, 01 Aug 2025 13:52:16 +0000</pubDate></item><item><title>今天生日</title><link>https://MaxLHy0424.github.io/post/18.html</link><description>不知不觉间，2025 年 4 月 24 日迎来了。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/18.html</guid><pubDate>Thu, 24 Apr 2025 11:50:01 +0000</pubDate></item><item><title>DeepSeek 推测期中考语文作文题</title><link>https://MaxLHy0424.github.io/post/17.html</link><description>明天就是期中考了，一上来就是语文。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/17.html</guid><pubDate>Wed, 23 Apr 2025 12:52:29 +0000</pubDate></item><item><title>恩师难忘，来日方长</title><link>https://MaxLHy0424.github.io/post/16.html</link><description>终究要迎来这天的离别。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/16.html</guid><pubDate>Fri, 18 Apr 2025 13:41:20 +0000</pubDate></item><item><title>DeepSeek 文生图</title><link>https://MaxLHy0424.github.io/post/15.html</link><description>&gt; 参考自 [BV1rAoqYRETP](https://www.bilibili.com/video/BV1rAoqYRETP).

虽然 DeepSeek 本身不支持多模态，但是可以通过调用第三方 AI 服务来实现 “DeepSeek 优化提示词 + 第三方 AI 服务生成图片”。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/15.html</guid><pubDate>Sat, 29 Mar 2025 08:47:41 +0000</pubDate></item><item><title>本站 Arch WSL 配置教程已过时</title><link>https://MaxLHy0424.github.io/post/14.html</link><description>如题, 本站最初发布的 Arch WSL 配置指南, 随着 WSL 和 Arch Linux 的更新已经过时. 以下为最新自动化配置脚本:

```bash
#!/bin/bash
sudo pacman -S sed nano --needed --noconfirm
echo 'bind ^X cut main
bind ^C copy main
bind ^V paste all
bind ^Q exit all
bind ^S savefile main
bind ^W writeout main
bind ^O insert main
bind ^H help all
bind ^H exit help
bind ^F whereis all
bind ^G findnext all
bind ^B wherewas all
bind ^D findprevious all
bind ^R replace main
unbind ^U all
unbind ^N main
unbind ^Y all
unbind M-J main
unbind M-T main
bind ^A mark main
bind ^P location main
bind ^T gotoline main
bind ^T gotodir browser
bind ^T cutrestoffile execute
bind ^L linter execute
bind ^E execute main
bind ^K '{mark}{end}{zap}' main
bind ^U '{mark}{home}{zap}' main
bind ^Z undo main
bind ^Y redo main
set tabsize 4
set autoindent
set noconvert
set smarthome
set tabstospaces
set mouse
set linenumbers
set casesensitive
set multibuffer
set nonewlines
set magic
set softwrap
set wordbounds
set constantshow
include /usr/share/nano/*.*' | sudo tee -a /etc/nanorc
sudo sed -i '1iServer = https:\/\/mirrors.tuna.tsinghua.edu.cn\/archlinux\/\$repo\/os\/\$arch' /etc/pacman.d/mirrorlist
sudo sed -i 's/#UseSyslog/UseSyslog/g' /etc/pacman.conf
sudo sed -i 's/#Color/Color/g' /etc/pacman.conf
sudo sed -i 's/NoProgressBar/#NoProgressBar/g' /etc/pacman.conf
sudo sed -i 's/ParallelDownloads = 5/ParallelDownloads = 100/g' /etc/pacman.conf
sudo sed -i '68,$d' /etc/pacman.conf
echo '[core-testing]
Include = /etc/pacman.d/mirrorlist
[core-staging]
Include = /etc/pacman.d/mirrorlist
[core]
Include = /etc/pacman.d/mirrorlist
[extra-testing]
Include = /etc/pacman.d/mirrorlist
[extra-staging]
Include = /etc/pacman.d/mirrorlist
[extra]
Include = /etc/pacman.d/mirrorlist
[multilib-testing]
Include = /etc/pacman.d/mirrorlist
[multilib-staging]
Include = /etc/pacman.d/mirrorlist
[multilib]
Include = /etc/pacman.d/mirrorlist
[kde-unstable]
Include = /etc/pacman.d/mirrorlist
[gnome-unstable]
Include = /etc/pacman.d/mirrorlist
[archlinuxcn]
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
[blackarch]
SigLevel = Never
Server = https://mirrors.tuna.tsinghua.edu.cn/blackarch/$repo/os/$arch' | sudo tee -a /etc/pacman.conf
sudo pacman-key --init
sudo pacman-key --lsign-key 'farseerfc@archlinux.org'
sudo pacman -Sy archlinuxcn-keyring blackarch-keyring --noconfirm
sudo pacman -S paru vifm --noconfirm
echo '#
# $PARU_CONF
# /etc/paru.conf
# ~/.config/paru/paru.conf
#
# See the paru.conf(5) manpage for options
#
# GENERAL OPTIONS
#
[options]
PgpFetch
Devel
Provides
DevelSuffixes = -git -cvs -svn -bzr -darcs -always -hg -fossil
#AurOnly
BottomUp
RemoveMake
SudoLoop
#UseAsk
SaveChanges
#CombinedUpgrade
CleanAfter
UpgradeMenu
NewsOnUpgrade
#LocalRepo
#Chroot
#Sign
#SignDb
#KeepRepoCache
#
# Binary OPTIONS
#
[bin]
FileManager = vifm
MFlags = --skipinteg
#Sudo = doas' | sudo tee /etc/paru.conf
sudo sed -i 's/#en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/g' /etc/locale.gen
sudo sed -i 's/#zh_CN.UTF-8 UTF-8/zh_CN.UTF-8 UTF-8/g' /etc/locale.gen
echo 'LANG=en_US.UTF-8' | sudo tee /etc/locale.conf
echo 'export LC_ALL=zh_CN.UTF-8
export LANG=zh_CN.UTF-8
export LANGUAGE=zh_CN:en_US' | sudo tee -a /etc/profile
sudo pacman -S adobe-source-han-sans-cn-fonts adobe-source-han-serif-cn-fonts wqy-microhei wqy-microhei-lite ttf-hannom wqy-zenhei wqy-bitmapfont ttf-arphic-ukai ttf-arphic-uming ttf-hannom noto-fonts opendesktop-fonts noto-fonts-emoji --noconfirm
sudo locale-gen
echo '# Type Path           Mode UID  GID  Age Argument
L+     /tmp/.X11-unix -    -    -    -   /mnt/wslg/.X11-unix' | sudo tee /etc/tmpfiles.d/wslg.conf
echo '[boot]
systemd=true' | sudo tee /etc/wsl.conf
sudo ln -sf /mnt/wslg/.X11-unix/* /tmp/.X11-unix/
sudo ln -sf /mnt/wslg/runtime-dir/wayland-0* /run/user/$(id -g)/
sudo pacman -Syyu base base-devel git zip unzip net-tools tree python wget btop fastfetch --needed --noconfirm
sudo pacman -Rcns $(pacman -Qtdq) --noconfirm
sudo pacman -Scc --noconfirm
sudo sed -i '38a\DownloadUser = alpm\n#DisableSandbox' /etc/pacman.conf
echo '#!/hint/bash
# shellcheck disable=2034

#
# /etc/makepkg.conf.d/rust.conf
#

#########################################################################
# RUST LANGUAGE SUPPORT
#########################################################################

# Flags used for the Rust compiler, similar in spirit to CFLAGS. Read
# linkman:rustc[1] for more details on the available flags.
RUSTFLAGS='-Cforce-frame-pointers=yes'

# Additional compiler flags appended to `RUSTFLAGS` for use in debugging.
# Usually this would include: ``-C debuginfo=2''. Read linkman:rustc[1] for
# more details on the available flags.
DEBUG_RUSTFLAGS='-C debuginfo=2'' | sudo tee /etc/makepkg.conf.d/rust.conf
sudo rm -rf /etc/pacman.conf.pacnew /etc/makepkg.conf.d/rust.conf.pacnew /etc/nanorc.pacnew /etc/sudoers.pacnew
sudo rm -rf /tmp/*
for i in {font,ICE,X11,XIM}; do sudo rm -rf /tmp/.${i}-unix; done
for i in {cache,log,tmp}; do sudo rm -rf /var/${i}/*; done
echo '
本 Shell 脚本已经帮助您:
  1. 配置 GNU Nano;
  2. 配置清华镜像源;
  3. 配置 pacman;
  4. 添加 archlinuxcn 和 blackarch 仓库;
  5. 启用所有测试仓库;
  6. 汉化系统, 安装常用字体;
  7. 启用 WSLg 和 Systemd;
  8. 安装必要软件包, paru, vifm, btop, fastfetch;
  9. 更新所有软件包;
  10. 清理无用软件包依赖和临时文件.
如果只有 root 用户, 建议您再创建一个普通用户.
如果不知道 root 用户密码, 请尽快使用命令 sudo passwd 修改.
请尽快重启 Arch WSL.'
```。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/14.html</guid><pubDate>Sat, 15 Mar 2025 08:30:20 +0000</pubDate></item><item><title>停下脚步, 于迷茫中思索</title><link>https://MaxLHy0424.github.io/post/13.html</link><description>日复一日熬夜开发 SCLTK，我的精力大抵就是因此而消磨了吧。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/13.html</guid><pubDate>Mon, 03 Mar 2025 13:16:11 +0000</pubDate></item><item><title>谈谈 C++ 的协程</title><link>https://MaxLHy0424.github.io/post/12.html</link><description>协程（Coroutine）的概念由来已久，一句话来解释就是“可以被挂起（暂停执行）并恢复的函数”。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/12.html</guid><pubDate>Sat, 22 Feb 2025 08:11:42 +0000</pubDate></item><item><title>CRCSN 开发小记 03</title><link>https://MaxLHy0424.github.io/post/11.html</link><description>日子过得真快呢。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/11.html</guid><pubDate>Thu, 15 Aug 2024 11:25:32 +0000</pubDate></item><item><title>paru: 比 yay 更加强大的 AUR 助手</title><link>https://MaxLHy0424.github.io/post/10.html</link><description>[paru](https://github.com/Morganamilo/paru) 是 yay 的作者之一 Morganamilo 使用 Rust 编写的另一个 AUR 助手。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/10.html</guid><pubDate>Fri, 09 Aug 2024 03:29:23 +0000</pubDate></item><item><title>CRCSN 开发小记 02</title><link>https://MaxLHy0424.github.io/post/7.html</link><description>三天过去了，CRCSN v5.0.0 的开发工作快马加鞭进行着，讲讲这几天的成果吧。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/7.html</guid><pubDate>Fri, 28 Jun 2024 09:50:15 +0000</pubDate></item><item><title>CRCSN 开发小记 01</title><link>https://MaxLHy0424.github.io/post/6.html</link><description>首先给不知道啥是 CRCSN 的讲讲. 总而言之, 这就是我自己开发的一个小项目, 作用是用来破解学校机房里比较主流的控制软件用的. 当初因为一时冲动而成, 目前正在规划 v5.0.0 大更新.&#13;
&#13;
大版本更新, 先画个饼吧. v5.0.0 目前规划的更新如下:&#13;
 - ConsoleUI (伪 GUI)&#13;
 - 重构 '工具箱'&#13;
&#13;
ConsoleUI 是在 Bilibili 上看到一个视频 (详见[此处](https://www.bilibili.com/video/BV1X14y1n7S4/)), 实现了在控制台窗口中使用鼠标点选, 想起 CRCSN 被同学吐槽学习成本高, 他们不会用 ~(我也是真的醉了)~, 才有次立项. 目前打算通过~复制粘贴别人写好的~函数调用 Windows API 实现.&#13;
&#13;
至于重构 '工具箱'...怎么说呢, '工具箱' 这东西从 v4.0.0 添加以来, 使用的人几乎没有, 但大部分的 Bug 却都是这东西的问题...于是折腾了好几个版本后, 忍无可忍才在 v4.9.0 移除. 目前还能再程序内看见它, 但已经被我删的只剩个空壳了. 也算是把那些屎山代码移除了.&#13;
&#13;
v5.0.0 的开发分支预计于 2024 年 6 月 26 日 17:00 左右同步至 GitHub 仓库, 还请各位拭目以待!&#13;
&#13;
GitHub 仓库请点[此处](https://github.com/MaxLHy0424/CRCSN)访问.。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/6.html</guid><pubDate>Tue, 25 Jun 2024 08:06:09 +0000</pubDate></item><item><title>为 Hyper-V 中的 Arch Linux 启用增强会话</title><link>https://MaxLHy0424.github.io/post/5.html</link><description>使用 Hyper-V 去安装 GNU/Linux 发行版, 启用增强会话最令人头大. 不清楚是不是 Microsoft 有意为之让大家用 WSL 2. 但总归, 这并不容易.

本教程将教您如何为 Hyper-V 中的 Arch Linux 虚拟机启用增强会话.

# 0 准备工作

&gt; [!IMPORTANT]
&gt; 请确保您的 Arch Linux 虚拟机是第二代虚拟机, 同时使用 pipewire 作声音服务. 并且在 Hyper-V 设置中允许使用增强会话.

然后, 在主机 Windows OS 下以管理员权限打开 PowerShell, 执行 (`&lt;VM&gt;` 改成 Arch Linux 虚拟机的名字, 最好加上英文半角双引号):

```powershell
Set-VM -VMName &lt;VM&gt; -EnhancedSessionTransportType HvSocket
```

# 1 配置包管理器

详见[这篇教程](https://maxlhy0424.github.io/post/2.html)的第 3 部分和[另一篇教程](https://maxlhy0424.github.io/post/10.html).

# 2 安装集成服务

执行以下命令:

```bash
sudo pacman -S hyperv
for i in {vss,fcopy,kvp}; do sudo systemctl enable hv_${i}_daemon.service; done
```

# 3 安装软件包

如果没有安装 git, 请先执行以下命令:

```bash
sudo pacman -S git base-devel
```

执行以下命令:

```bash
git clone https://github.com/microsoft/linux-vm-tools.git
git clone https://aur.archlinux.org/xrdp-devel-git.git
```

首先切换到文件夹 `xrdp-devel-git`, 在文件 `PKGBUILD` 中的 `build()` 部分中, 添加以下参数到构建选项中:

```
--enable-vsock
```

即整个`build()`变为:

```
build() {
  cd $pkgname
  ./configure --prefix=/usr \
              --sysconfdir=/etc \
              --localstatedir=/var \
              --sbindir=/usr/bin \
	      --libexecdir=/usr/lib \
              --with-systemdsystemdunitdir=/usr/lib/systemd/system \
              --enable-jpeg \
              --enable-tjpeg \
              --enable-fuse \
	      --enable-opus \
	      --enable-rfxcodec \
	      --enable-mp3lame \
	      --enable-pixman \
              --enable-vsock
  # Fight unused direct deps
  sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0 /g' -e 's/    if test '$export_dynamic' = yes &amp;&amp; test -n '$export_dynamic_flag_spec'; then/      func_append compile_command ' -Wl,-O1,--as-needed'\n      func_append finalize_command ' -Wl,-O1,--as-needed'\n\0/' libtool
  make V=0
}
```

就是 `# Fight unused direct deps` 上面的两行改了一下.

编辑完成后, 执行命令:

```
makepkg --skipchecksum -si
```

然后执行以下命令:

```
paru -S xorg-xinit xorgxrdp-devel-git openssl-1.1 pipewire-module-xrdp
```

接着切换回当初克隆仓库时所在的目录, 切换到 `linux-vm-tools/arch`, 执行:

```bash
sudo ./install-config.sh
```

&gt; [!WARNING]
&gt; 不要使用 `linux-vm-tools/arch` 中的 `makepkg.sh` 脚本, 其编译选项并不正确.

# 4 解决 XRDP 反复连接问题

在当前用户的家目录下创建 `.xinitrc`.

根据不同的桌面环境添加内容:
 - i3w / dwm:

 ``` 
 exec i3w
 ```

 - Gnome:

 ```
 unset SESSION_MANAGER
 unset DBUS_SESSION_BUS_ADDRESS
 exec dbus-launch  gnome-shell --x11
 ```

 - KDE Plasma:

 ```
 export DESKTOP_SESSION=plasma
 exec startplasma-x11
 ```

 - Xfce4:

 ```
 unset SESSION_MANAGER
 unset DBUS_SESSION_BUS_ADDRESS
 exec dbus-launch startxfce4
 ```

然后执行:

```bash
sudo systemctl enable xrdp.service
sudo systemctl enable xrdp-sesman.service
sudo xrdp-keygen xrdp /etc/xrdp/rsakeys.ini
sudo pacman -Rcns $(pacman -Qtdq)
```

接着重启虚拟机.

重启后依次输入用户名, 用户密码登录账户, 然后在弹出窗口中再次输入账户密码即可.

&gt; [!TIP]
&gt; 实际上直接关闭弹出的窗口也是可以正常使用的, 不过最好还是输入一下账户密码.

至此, 一切大功告成!

# Extra 汉化 SDDM

这一部分和本篇教程没什么关系, 了解下就可以.

如果是以 Systemd 启动 SDDM, 可以打开 `/usr/lib/systemd/system/sddm.service`, 在 `[Service]` 下添加:

```
Environment=LANG=zh_CN.UTF-8
```

如果不是 Systemd 启动, 只能改 `/etc/locale.conf` 了 (不建议改, 虚拟终端会乱码).
。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/5.html</guid><pubDate>Mon, 24 Jun 2024 08:44:46 +0000</pubDate></item><item><title>终究是小学毕业了</title><link>https://MaxLHy0424.github.io/post/4.html</link><description>&gt; 本文原定于今天下午 7 点发布, 但因为突然有事, 延迟到了现在, 深感抱歉.&#13;
&#13;
不知不觉间, 小学六年时光匆匆而去. 今天起, 我已不再是一名小学生. 鲜艳的红领巾摆放在柜子的一角, 校徽随手丢在抽屉的深处, 校服消沉在了衣柜中. 以往朝夕相处的同学, 现在只存于照片里了. 小学六年, 每一次的欢乐, 哭泣, 振作, 都沉入了昨日的夕阳. 小学生活, 至此告一段落, 画上了圆满的句号.&#13;
&#13;
六年, 9600 节课, 240 个星期, 12 个学期, 一张试卷考散了一群人, 最后只留下一张照片和一声再见. 六年, 书齐了, 人却散了, 和朝夕相处的同学们坐到站了, 也该下车了...下车后，新的列车依旧坐满了人, 可惜, 已经不是原来那群人了...&#13;
&#13;
还记得那每天两声 '老师好' 和 '老师再见', 到现在, 只剩 '有缘再见'. 时光匆匆中, 每个鲜活的人使我难忘. 我的同学, 我的老师, 现在他们都沉于我的漫漫的记忆长河中了. 那些快乐的时光, 都将在我内心深处如宝石般闪闪发光. 明明已是黑夜, 但我仍可见昨日的夕阳...&#13;
&#13;
我将永远铭记这一切, 直到永远...&#13;
&#13;
我的故事尚未画下句号, 大家的故事尚未画下句号. 你我的故事, 仍需继续写下去, 直到人生终末的句号. 这样的时刻会在不久的将来重演, 而你我, 仍然走着自己的人生之路. 我们回首夕阳, 更要看向远方, 将我们的 '青春剧' 继续演下去...&#13;
&#13;
&gt; 谨以此文献给我亲爱的同学, 老师, 以及我的母校. 愿我们都能书写出自己人生的辉煌篇章.。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/4.html</guid><pubDate>Sat, 22 Jun 2024 13:53:41 +0000</pubDate></item><item><title>手把手教您编译适用于 WSL 2 的 Linux Kernel</title><link>https://MaxLHy0424.github.io/post/3.html</link><description>WSL 2 即使更新到最新预发布版本, Linux Kernel 版本也是`6.6.xxx`. 一部分软件可能会需要更高的内核版本, 或者是用户想要测试最新的 Linux Kernel 特性. 因此, 网上替换 WSL 2 的 Linux Kernel 的教程才会如此涌现.

&gt; [!CAUTION]
&gt; 这可能会导致部分 GNU/Linux 发行版不稳定, 软件无法运行等问题. 所以不建议在生产环境中替换 WSL 2 的 Linux Kernel.

&gt; [!TIP]
&gt; 如果您在 WSL 2 中使用 Arch Linux, 建议先阅读[这篇教程](https://MaxLHy0424.github.io/post/2.html), 对 Arch WSL 进行基本的配置, 然后再阅读本教程.

# 1 安装依赖

Debian 系:

```bash
sudo apt install build-essential flex bison dwarves libssl-dev libelf-dev
```

Arch 系:

```bash
sudo pacman -S base-devel flex bison pahole openssl libelf bc
```

# 2 下载 Linux Kernel 源代码

访问 [The Linux Kernel Archive](https://kernel.org), 等待加载完成后, 可以看到网页中间的 Linux Kernel 源代码存档列表. 在此之前, 我们需要了解 Linux Kernel 的主要开发分支:

- `mainline` (主线)
    - Linux Kernel 的主要开发分支, 由 ***Linus Torvalds*** 管理, 包含最新的 Linux Kernel 特性及漏洞修复.
    - 常常作为下一个 Linux Kernel 的开发分支, 可能存在一些稳定性问题.
- `stable` (稳定)
    - 最常用的 Linux Kernel 分支, 包含最新的漏洞修复, 日常使用首选.
- `longterm` (长期)
    - 较旧的 Linux Kernel 分支, 持续进行漏洞修复, 长期使用首选.

根据具体需求下载对应的 Linux Kernel, 然后通过 Windows 资源管理器复制到前面安装好依赖的 GNU/Linux 发行版的用户家目录中.

然后执行以下命令 (将 `&lt;File&gt;` 替换为您的 Linux Kernel 压缩包文件名, 将 `&lt;Dir&gt;` 替换为您的 Linux Kernel 压缩包解压后的目录名):

```bash
cd ~
tar xf &lt;File&gt;
cd &lt;Dir&gt;
```

# 3 编译内核

&gt; [!NOTE]
&gt; 如果您在中国大陆, 此步骤可能需要使用网络代理.

执行以下命令下载适用于 WSL 2 的 Linux Kernel 构建配置并保存:

```bash
wget https://raw.githubusercontent.com/microsoft/WSL2-Linux-Kernel/linux-msft-wsl-6.1.y/arch/x86/configs/config-wsl -O arch/x86/configs/config-wsl
```

然后执行以下命令来使用全部线程编译内核:

```bash
make KCONFIG_CONFIG=arch/x86/configs/config-wsl -j$(nproc)
```

途中的编译配置选择一路按回车即可.

# 4 保存并替换

执行以下命令 (将 `&lt;PATH&gt;` 替换为 C 盘下的文件路径, 例如 `Data/WslLinuxKernel`):

```bash
cp arch/x86/boot/bzImage /mnt/c/&lt;PATH&gt;
```

然后将文件名改为 `kernel`.

接着, 在当前 Windows 用户目录下创建文件 `.wslconfig` (有则不用), 添加 (`[wsl2]` 无需重复添加; 将 `C:\\&lt;PATH&gt;\\kernel` 替换为您的 Linux Kernel 文件路径; 把路径分隔符替换为`\\`):

```
[wsl2]
kernel=C:\\&lt;PATH&gt;\\kernel 
```

接着, 在 Windows Terminal 中执行以下命令:

```Batch
wsl --shutdown
```

再次启动 WSL 2 中的 GNU/Linux 发行版, 执行:

```bash
uname -a
```

Linux Kernel 已经成功替换, 一切大功告成!
。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/3.html</guid><pubDate>Fri, 21 Jun 2024 10:43:20 +0000</pubDate></item><item><title>下江小春都能看懂的 Arch WSL 安装与配置指南</title><link>https://MaxLHy0424.github.io/post/2.html</link><description>在 Windows OS 上开发 GNU/Linux 软件时, WSL 2 常为不二之选.

但是, WSL 2 上开箱即用的 GNU/Linux 发行版, 几乎只有 Ubuntu. 想要在 WSL 2 上使用 Arch Linux, 配置较为麻烦.

本教程将帮助您在 WSL 2 上安装并配置 Arch Linux.

&gt; [!NOTE]
&gt; 如果您觉得手动操作有些麻烦, 可以试试博主写的[自动配置脚本](https://gist.github.com/MaxLHy0424/4254cfd932485a93b3b0b73274858bc9). 但还是建议看看教程.

&gt; [!IMPORTANT]
&gt; 适用于 Windows 11 22H2 及以上版本, 其以下的版本可能会出现各种问题.

# 0 准备工作

WSL 2 的硬件需求及启用方法在此处不多赘述, 请自行查阅.

&gt; [!NOTE]
&gt; 如果您有安装 VMware Workstation Pro 等寄居型虚拟机, 推荐改用 Microsoft Hyper-V. 否则其运行的虚拟机性能可能会受到影响.

启用后, 在 Windows Terminal (管理员权限) 中执行以下命令:

```Batch
wsl --update
wsl --update --pre-release
```

接着, 在当前的 Windows OS 用户目录下创建文件`.wslconfig`, 在文件中添加以下内容:

```
[wsl2]
ipv6=true
networkingMode=mirrored
dnsTunneling=true
firewall=true
autoProxy=true
defaultVhdSize=137438953472
[experimental]
autoMemoryReclaim=gradual
bestEffortDnsParsing=true
useWindowsDnsCache=true
```

然后, 在 Microsoft Store 中搜索 `Arch WSL`, 点击下图中所示的软件 (一般为第1个):

![Microsoft Store 搜索结果的局部截图](https://github.com/MaxLHy0424/MaxLHy0424.github.io/assets/142279449/ef60802e-5e57-4b6f-81cf-aa6add640178)

按照正常流程安装, 打开, 创建账户. 

# 1 修改 root 用户密码

通过 `sudo passwd root` 修改`root` 用户密码.

# 2 配置 GNU Nano 文本编辑器

打开 `/etc/nanorc`, 在末尾追加:

```
bind ^X cut main
bind ^C copy main
bind ^V paste all
bind ^Q exit all
bind ^S savefile main
bind ^W writeout main
bind ^O insert main
bind ^H help all
bind ^H exit help
bind ^F whereis all
bind ^G findnext all
bind ^B wherewas all
bind ^D findprevious all
bind ^R replace main
unbind ^U all
unbind ^N main
unbind ^Y all
unbind M-J main
unbind M-T main
bind ^A mark main
bind ^P location main
bind ^T gotoline main
bind ^T gotodir browser
bind ^T cutrestoffile execute
bind ^L linter execute
bind ^E execute main
bind ^K '{mark}{end}{zap}' main
bind ^U '{mark}{home}{zap}' main
bind ^Z undo main
bind ^Y redo main
set tabsize 4
set autoindent
set noconvert
set smarthome
set tabstospaces
set mouse
set linenumbers
set casesensitive
set multibuffer
set nonewlines
set magic
set softwrap
set wordbounds
set constantshow
include /usr/share/nano/*.*
```

# 3 配置包管理器

打开 `/etc/pacman.d/mirrorlist`, 在顶部添加:

```
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
```

打开 `/etc/pacman.conf`, 找到:

```
#UseSyslog
#Color
NoProgressBar
```

换成:

```
UseSyslog
Color
#NoProgressBar
```

然后找到这一行:

```
ParallelDownloads = 5
```

将后面的 `5` 修改成你想要同时下载的软件包的数量.

接着把后面的软件源全部删掉, 换成下面的:

```
[testing]
Include = /etc/pacman.d/mirrorlist
[staging]
Include = /etc/pacman.d/mirrorlist
[core-testing]
Include = /etc/pacman.d/mirrorlist
[core-staging]
Include = /etc/pacman.d/mirrorlist
[core]
Include = /etc/pacman.d/mirrorlist
[extra-testing]
Include = /etc/pacman.d/mirrorlist
[extra-staging]
Include = /etc/pacman.d/mirrorlist
[extra]
Include = /etc/pacman.d/mirrorlist
[community-testing]
Include = /etc/pacman.d/mirrorlist
[community-staging]
Include = /etc/pacman.d/mirrorlist
[community]
Include = /etc/pacman.d/mirrorlist
[multilib-testing]
Include = /etc/pacman.d/mirrorlist
[multilib-staging]
Include = /etc/pacman.d/mirrorlist
[multilib]
Include = /etc/pacman.d/mirrorlist
[archlinuxcn]
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
[blackarch]
SigLevel = Never
Server = https://mirrors.tuna.tsinghua.edu.cn/blackarch/$repo/os/$arch
```

执行以命令:

```bash
sudo pacman-key --init
sudo pacman-key --lsign-key 'farseerfc@archlinux.org'
sudo pacman -Sy archlinuxcn-keyring blackarch-keyring --noconfirm
```

执行以下命令安装 yay 稳定版 (安装开发版把 `yay` 改为 `yay-git`):

````bash
sudo pacman -S yay
````

如果您愿意的话, 也可以试试 paru, 可以参考[这篇教程](https://maxlhy0424.github.io/post/10.html).

# 4 汉化

打开`/etc/locale.gen`, 找到:

```
#en_US.UTF-8 UTF-8
```

```
#zh_CN.UTF-8 UTF-8
```

将前面的`#`去掉.

打开`/etc/locale.conf`, 将所有文本替换为:

```
LANG=en_US.UTF-8
```

打开`/etc/profile`, 在末尾追加:

```
export LC_ALL=zh_CN.UTF-8
export LANG=zh_CN.UTF-8
export LANGUAGE=zh_CN:en_US
```

然后执行以下命令:

```bash
sudo pacman -S adobe-source-han-sans-cn-fonts adobe-source-han-serif-cn-fonts wqy-microhei wqy-microhei-lite ttf-hannom wqy-zenhei wqy-bitmapfont ttf-arphic-ukai ttf-arphic-uming ttf-hannom noto-fonts opendesktop-fonts noto-fonts-emoji --noconfirm
sudo locale-gen
```

# 5 解决 WSLg 及 Systemd 问题

执行:

```bash
echo '# Type Path           Mode UID  GID  Age Argument
L+     /tmp/.X11-unix -    -    -    -   /mnt/wslg/.X11-unix' | sudo tee /etc/tmpfiles.d/wslg.conf
```

如果 Systemd 没有启动, 可以试试:

```
echo '[boot]
systemd=true' | sudo tee /etc/wsl.conf
```

# 6 善后工作及后续使用注意事项

执行以下命令:

```bash
sudo pacman -Syyu base base-devel git zip unzip net-tools tree python wget btop fastfetch --needed --noconfirm
sudo pacman -Rcns $(pacman -Qtdq) --noconfirm
sudo pacman -Scc --noconfirm
sudo rm -rf /tmp/*
for i in {font,ICE,X11,XIM}; do sudo rm -rf /tmp/.${i}-unix; done
for i in {cache,log,tmp}; do sudo rm -rf /var/${i}/*; done
```

&gt; [!IMPORTANT]
&gt; 如果后续安装软件包缺少依赖, 可以临时注释掉`/etc/pacman.conf`中所有后缀为`testing`或`staging`的软件源, 完成后使用`sudo pacman -Syyu`更新依赖即可.
。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/post/2.html</guid><pubDate>Thu, 20 Jun 2024 11:15:36 +0000</pubDate></item><item><title>关于</title><link>https://MaxLHy0424.github.io/about.html</link><description>欢迎来到我的 Blog 🤗. 这里将会发布一些有趣的东西. 如果您感兴趣, 欢迎将本网站加入浏览器收藏夹, 推荐给其他人. 有 GitHub 账户的话, 欢迎评论 😉.

在此介绍我自己. 目前, 我是一名八年级学生, 2024 年下半年正式成为一名 OIer 😎. 我掌握 **C++**, **PowerShell**, **Python** 等编程语言. 我也是 **Minecraft** 和 **蔚蓝档案 (国际服)** 的长期玩家 😆.

欢迎加入我的 QQ 群, 群号 702827017.

**我的个人账号**:
 - [Bilibili](https://space.bilibili.com/1678066522)
 - [MineBBS](https://www.minebbs.com/members/maxlhy.88192/)
 - [GitHub](https://github.com/MaxLHy0424)
 - QQ: 1097268127
 - Xbox ID: MaxLHy0424。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/about.html</guid><pubDate>Thu, 20 Jun 2024 09:44:09 +0000</pubDate></item><item><title>友情链接</title><link>https://MaxLHy0424.github.io/link.html</link><description>这里收录了一些有趣的网站。</description><guid isPermaLink="true">https://MaxLHy0424.github.io/link.html</guid><pubDate>Fri, 29 Aug 2025 13:51:07 +0000</pubDate></item></channel></rss>