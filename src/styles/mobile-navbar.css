/**
 * 导航栏半透明样式
 */

#navbar > div {
  background: var(--card-bg);
  border-radius: var(--radius-large);
  will-change: background, backdrop-filter, box-shadow;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 桌面端 - 亮色 */
@media (min-width: 1280px) {
  #banner-wrapper ~ * #navbar[data-transparent-mode="semi"] > div,
  body:has(#banner-wrapper) #navbar[data-transparent-mode="semi"] > div {
    backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.55);
    border: 1px solid rgba(255, 255, 255, 0.55);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  }
}

/* 移动端 (仅首页) - 亮色 */
@media (max-width: 1279px) {
  #banner-wrapper ~ * #navbar[data-transparent-mode="semi"][data-is-home="true"] > div,
  body:has(#banner-wrapper) #navbar[data-transparent-mode="semi"][data-is-home="true"] > div {
    backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.55);
    border: 1px solid rgba(255, 255, 255, 0.55);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  }
}

/* 桌面端 - 暗色 */
@media (min-width: 1280px) {
  :root.dark #banner-wrapper ~ * #navbar[data-transparent-mode="semi"] > div,
  :root.dark body:has(#banner-wrapper) #navbar[data-transparent-mode="semi"] > div {
    backdrop-filter: blur(20px);
    background: rgba(0, 0, 0, 0.55);
    border: 1px solid rgba(0, 0, 0, 0.55);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }
}

/* 移动端 (仅首页) - 暗色 */
@media (max-width: 1279px) {
  :root.dark #banner-wrapper ~ * #navbar[data-transparent-mode="semi"][data-is-home="true"] > div,
  :root.dark body:has(#banner-wrapper) #navbar[data-transparent-mode="semi"][data-is-home="true"] > div {
    backdrop-filter: blur(20px);
    background: rgba(0, 0, 0, 0.55);
    border: 1px solid rgba(0, 0, 0, 0.55);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }
}

/**
 * 导航栏全透明样式
 */

/* 桌面端 */
@media (min-width: 1280px) {
  #banner-wrapper ~ * #navbar[data-transparent-mode="full"] > div,
  body:has(#banner-wrapper) #navbar[data-transparent-mode="full"] > div,
  :root.dark #banner-wrapper ~ * #navbar[data-transparent-mode="full"] > div,
  :root.dark body:has(#banner-wrapper) #navbar[data-transparent-mode="full"] > div {
    background: transparent;
    box-shadow: none;
    border: 1px solid transparent;
    backdrop-filter: none;
  }
}

/* 移动端 (仅首页) */
@media (max-width: 1279px) {
  #banner-wrapper ~ * #navbar[data-transparent-mode="full"][data-is-home="true"] > div,
  body:has(#banner-wrapper) #navbar[data-transparent-mode="full"][data-is-home="true"] > div,
  :root.dark #banner-wrapper ~ * #navbar[data-transparent-mode="full"][data-is-home="true"] > div,
  :root.dark body:has(#banner-wrapper) #navbar[data-transparent-mode="full"][data-is-home="true"] > div {
    background: transparent;
    box-shadow: none;
    border: 1px solid transparent;
    backdrop-filter: none;
  }
}

/* --- 初始状态 (Initial) --- */
@media (min-width: 1280px) {
  #banner-wrapper ~ * #navbar[data-transparent-mode="semifull"] > div,
  body:has(#banner-wrapper) #navbar[data-transparent-mode="semifull"] > div {
    background: transparent;
    box-shadow: none;
    border: 1px solid transparent;
  }
}

@media (max-width: 1279px) {
  #banner-wrapper ~ * #navbar[data-transparent-mode="semifull"][data-is-home="true"] > div,
  body:has(#banner-wrapper) #navbar[data-transparent-mode="semifull"][data-is-home="true"] > div {
    background: transparent;
    box-shadow: none;
    border: 1px solid transparent;
  }
}

/* 桌面端 - 滚动后 */
@media (min-width: 1280px) {
  #banner-wrapper ~ * #navbar[data-transparent-mode="semifull"].scrolled > div,
  body:has(#banner-wrapper) #navbar[data-transparent-mode="semifull"].scrolled > div {
    backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.55);
    border: 1px solid rgba(255, 255, 255, 0.55);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  }

  :root.dark #banner-wrapper ~ * #navbar[data-transparent-mode="semifull"].scrolled > div,
  :root.dark body:has(#banner-wrapper) #navbar[data-transparent-mode="semifull"].scrolled > div {
    background: rgba(0, 0, 0, 0.55);
    border: 1px solid rgba(0, 0, 0, 0.55);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }
}

/* 移动端 - 滚动后 */
@media (max-width: 1279px) {
  #banner-wrapper ~ * #navbar[data-transparent-mode="semifull"][data-is-home="true"].scrolled > div,
  body:has(#banner-wrapper) #navbar[data-transparent-mode="semifull"][data-is-home="true"].scrolled > div {
    backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.55);
    border: 1px solid rgba(255, 255, 255, 0.55);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  }

  :root.dark #banner-wrapper ~ * #navbar[data-transparent-mode="semifull"][data-is-home="true"].scrolled > div,
  :root.dark body:has(#banner-wrapper) #navbar[data-transparent-mode="semifull"][data-is-home="true"].scrolled > div {
    background: rgba(0, 0, 0, 0.55);
    border: 1px solid rgba(0, 0, 0, 0.55);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }
}

/* 平板设备优化 */
@media (min-width: 768px) and (max-width: 1279px) {
  #navbar > div {
    border-radius: 1rem;
  }
}

/* 小屏手机优化 */
@media (max-width: 480px) {
  #navbar > div {
    border-radius: 0.5rem;
    margin: 0;
    padding-left: 1rem;
    padding-right: 1rem;
    max-width: none;
    width: 100%;
  }
}

/* 手机端导航栏全宽优化 */
@media (max-width: 768px) {
  #navbar > div {
    max-width: none;
    width: 100%;
    margin-left: 0;
    margin-right: 0;
  }
}

/* 通用样式 */
@media (min-width: 1280px) {
  #banner-wrapper ~ * .float-panel,
  body:has(#banner-wrapper) .float-panel,
  #banner-wrapper ~ * .dropdown-content,
  body:has(#banner-wrapper) .dropdown-content,
  #banner-wrapper ~ * #display-setting,
  body:has(#banner-wrapper) #display-setting,
  #banner-wrapper ~ * #nav-menu-panel,
  body:has(#banner-wrapper) #nav-menu-panel,
  #banner-wrapper ~ * #mobile-toc-panel,
  body:has(#banner-wrapper) #mobile-toc-panel,
  #banner-wrapper ~ * #search-panel,
  body:has(#banner-wrapper) #search-panel {
    backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.85);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  }

  /* 暗色模式 */
  :root.dark #banner-wrapper ~ * .float-panel,
  :root.dark body:has(#banner-wrapper) .float-panel,
  :root.dark #banner-wrapper ~ * .dropdown-content,
  :root.dark body:has(#banner-wrapper) .dropdown-content,
  :root.dark #banner-wrapper ~ * #display-setting,
  :root.dark body:has(#banner-wrapper) #display-setting,
  :root.dark #banner-wrapper ~ * #nav-menu-panel,
  :root.dark body:has(#banner-wrapper) #nav-menu-panel,
  :root.dark #banner-wrapper ~ * #mobile-toc-panel,
  :root.dark body:has(#banner-wrapper) #mobile-toc-panel,
  :root.dark #banner-wrapper ~ * #search-panel,
  :root.dark body:has(#banner-wrapper) #search-panel {
    background: rgba(24, 25, 38, 0.85);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
  }
}

/* 移动端 (仅首页) */
@media (max-width: 1279px) {
  #banner-wrapper ~ * #navbar[data-is-home="true"] .float-panel,
  body:has(#banner-wrapper) #navbar[data-is-home="true"] .float-panel,
  #banner-wrapper ~ * #navbar[data-is-home="true"] .dropdown-content,
  body:has(#banner-wrapper) #navbar[data-is-home="true"] .dropdown-content,
  #banner-wrapper ~ * #navbar[data-is-home="true"] ~ * #display-setting,
  body:has(#banner-wrapper) #navbar[data-is-home="true"] ~ * #display-setting,
  body:has(#banner-wrapper) #navbar[data-is-home="true"] #nav-menu-panel,
  body:has(#banner-wrapper) #navbar[data-is-home="true"] #mobile-toc-panel,
  body:has(#banner-wrapper) #navbar[data-is-home="true"] #search-panel,
  body:has(#banner-wrapper) #navbar[data-is-home="true"] #display-setting {
    backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.85);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  }

  /* 暗色模式 */
  :root.dark #banner-wrapper ~ * #navbar[data-is-home="true"] .float-panel,
  :root.dark body:has(#banner-wrapper) #navbar[data-is-home="true"] .float-panel,
  :root.dark #banner-wrapper ~ * #navbar[data-is-home="true"] .dropdown-content,
  :root.dark body:has(#banner-wrapper) #navbar[data-is-home="true"] .dropdown-content,
  :root.dark #banner-wrapper ~ * #navbar[data-is-home="true"] ~ * #display-setting,
  :root.dark body:has(#banner-wrapper) #navbar[data-is-home="true"] ~ * #display-setting,
  :root.dark body:has(#banner-wrapper) #navbar[data-is-home="true"] #nav-menu-panel,
  :root.dark body:has(#banner-wrapper) #navbar[data-is-home="true"] #mobile-toc-panel,
  :root.dark body:has(#banner-wrapper) #navbar[data-is-home="true"] #search-panel,
  :root.dark body:has(#banner-wrapper) #navbar[data-is-home="true"] #display-setting {
    background: rgba(24, 25, 38, 0.85);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
  }
}
